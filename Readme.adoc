= Signal Handling in Swift
Fran√ßois Lamboley <francois.lamboley@frostland.fr>

This package provides a Swift syntax for the low-level C `sigaction` function
and a way to delay or cancel sigaction handlers.

== Example of Use

I believe good examples are worth thousands of words.

Example of a simple traditional sigaction handler, using Swift syntax:

[source,swift]
----
let action = Sigaction(handler: .ansiC({ sigID in
   logger.debug("Handling signal \(Signal(rawValue: sigID)) from sigaction")
}))
try action.install(on: .terminated)
----

Example of a delayed sigaction:

[source,swift]
----
let delayedSigaction = try SigactionDelayer_Unsig.registerDelayedSigaction(Signal.terminated, handler: { signal, doneHandler in
   logger.debug("Received signal \(signal); delaying it to clean-up")
   myAsyncCleanUp{
      logger.debug("Cleanup is done, allowing signal to go through")
      doneHandler(true)
   })
})
----

With both examples in the same code, when the program receives the terminated
signal (15 on macOS), the following will be logged:

[source,text]
----
Received signal SIGTERM; delaying it to clean-up
Cleanup is done, allowing signal to go through
Handling signal SIGTERM from sigaction
----

== How Does Delaying the Sigaction Work?
